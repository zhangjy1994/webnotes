<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git | 张佳宇的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="WEB前端工程师">
    
    <link rel="preload" href="/webnotes/assets/css/0.styles.0982f9da.css" as="style"><link rel="preload" href="/webnotes/assets/js/app.20f97b8a.js" as="script"><link rel="preload" href="/webnotes/assets/js/2.4a41272f.js" as="script"><link rel="preload" href="/webnotes/assets/js/13.38493cfb.js" as="script"><link rel="prefetch" href="/webnotes/assets/js/10.dde43042.js"><link rel="prefetch" href="/webnotes/assets/js/11.72689610.js"><link rel="prefetch" href="/webnotes/assets/js/12.449c0007.js"><link rel="prefetch" href="/webnotes/assets/js/14.5e7b5adc.js"><link rel="prefetch" href="/webnotes/assets/js/15.1f9cbb1f.js"><link rel="prefetch" href="/webnotes/assets/js/16.ad426224.js"><link rel="prefetch" href="/webnotes/assets/js/17.10ba4518.js"><link rel="prefetch" href="/webnotes/assets/js/18.e99cc515.js"><link rel="prefetch" href="/webnotes/assets/js/19.8338c644.js"><link rel="prefetch" href="/webnotes/assets/js/20.6da5901d.js"><link rel="prefetch" href="/webnotes/assets/js/21.b98f4a2b.js"><link rel="prefetch" href="/webnotes/assets/js/22.e0395495.js"><link rel="prefetch" href="/webnotes/assets/js/23.4e2833a4.js"><link rel="prefetch" href="/webnotes/assets/js/24.cca35cca.js"><link rel="prefetch" href="/webnotes/assets/js/25.c71dcda0.js"><link rel="prefetch" href="/webnotes/assets/js/26.ecd3f0d9.js"><link rel="prefetch" href="/webnotes/assets/js/27.c14793ac.js"><link rel="prefetch" href="/webnotes/assets/js/28.0eeec312.js"><link rel="prefetch" href="/webnotes/assets/js/29.eaefc3f3.js"><link rel="prefetch" href="/webnotes/assets/js/3.ca40d839.js"><link rel="prefetch" href="/webnotes/assets/js/30.14964890.js"><link rel="prefetch" href="/webnotes/assets/js/31.0dad13c9.js"><link rel="prefetch" href="/webnotes/assets/js/32.35857f17.js"><link rel="prefetch" href="/webnotes/assets/js/33.0527b613.js"><link rel="prefetch" href="/webnotes/assets/js/34.0582020e.js"><link rel="prefetch" href="/webnotes/assets/js/35.75df06a2.js"><link rel="prefetch" href="/webnotes/assets/js/36.59f8cd94.js"><link rel="prefetch" href="/webnotes/assets/js/37.9f7e1842.js"><link rel="prefetch" href="/webnotes/assets/js/38.ac91f3cd.js"><link rel="prefetch" href="/webnotes/assets/js/39.ff460441.js"><link rel="prefetch" href="/webnotes/assets/js/4.b0af2a6e.js"><link rel="prefetch" href="/webnotes/assets/js/40.3c358678.js"><link rel="prefetch" href="/webnotes/assets/js/41.8b3470d9.js"><link rel="prefetch" href="/webnotes/assets/js/42.b01e288a.js"><link rel="prefetch" href="/webnotes/assets/js/43.220e709d.js"><link rel="prefetch" href="/webnotes/assets/js/44.9da44133.js"><link rel="prefetch" href="/webnotes/assets/js/45.fe19f32a.js"><link rel="prefetch" href="/webnotes/assets/js/46.744017ec.js"><link rel="prefetch" href="/webnotes/assets/js/47.bcf97b24.js"><link rel="prefetch" href="/webnotes/assets/js/48.6b6f9e30.js"><link rel="prefetch" href="/webnotes/assets/js/5.b62c58c1.js"><link rel="prefetch" href="/webnotes/assets/js/6.b66c6850.js"><link rel="prefetch" href="/webnotes/assets/js/7.3a5dcde7.js"><link rel="prefetch" href="/webnotes/assets/js/8.9028e652.js"><link rel="prefetch" href="/webnotes/assets/js/9.21e437ac.js">
    <link rel="stylesheet" href="/webnotes/assets/css/0.styles.0982f9da.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webnotes/" class="home-link router-link-active"><!----> <span class="site-name">张佳宇的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="tel:18813023154" class="nav-link external">
  联系我
  <!----></a></div><div class="nav-item"><a href="/webnotes/views/" class="nav-link router-link-active">
  Guide
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="tel:18813023154" class="nav-link external">
  联系我
  <!----></a></div><div class="nav-item"><a href="/webnotes/views/" class="nav-link router-link-active">
  Guide
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/webnotes/views/html/" class="sidebar-heading clickable"><span>Html</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工具</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webnotes/views/tool/1.html" class="sidebar-link">Mac</a></li><li><a href="/webnotes/views/tool/2.html" aria-current="page" class="active sidebar-link">Git</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git"><a href="#git" class="header-anchor">#</a> Git</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ～/.ssh
ssh-keygen -t rsa -C <span class="token string">&quot;zhangjiayu@newlink.com&quot;</span> <span class="token comment"># 注册ssh-key,生成密钥 填写你的邮箱地址,将生成的公钥配置到gitlab中</span>
<span class="token comment"># 输入自定义key的文件名，我这里加的是id_rsa_zjy,这个名字可以自定义</span>
ssh-add -K ~/.ssh/id_rsa_zjy <span class="token comment"># 将上述生成的自定义 ssh-key 添加到ssh-agent</span>
ssh-add -l <span class="token comment"># 添加成功之后可以查看一下是否把 id_rsa_zjy 添加进去了</span>
<span class="token function">ssh</span> -T git@gitlab.newlink.com <span class="token comment"># 测试 ssh 是否连通</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="常用指令"><a href="#常用指令" class="header-anchor">#</a> 常用指令</h2> <ul><li>git config --global user.email &quot;zhangjy@newlink.com&quot;: 添加全局配置邮箱（ 去掉'–-global',则为当前仓库配置 ）</li> <li>git config --global user.name &quot;zhangjiayu&quot;: 添加全局配置用户名（ 去掉'–-global',则为当前仓库配置 ）</li> <li>git config --list: git查看配置信息</li> <li>git init: 初始化仓库（把目录变成Git可以管理的仓库）</li> <li>git remote add origin git@gitlab.newlink.com:ty_fe/czb-wechat-mp.git: 配置远程仓库地址</li> <li>git remote -v: 查看远程仓库地址</li> <li>git clone ***: 克隆代码</li> <li>git add .: 将修改的内容添加到暂存区</li> <li>git commit -m &quot;feat: ***&quot;: 提交本次修改代码并注释</li> <li>git commit --amend（有时候我们提交完了才发现漏掉了几个文件没有添加，或者提交信息写错了。 此时，可以运行带有 --amend 选项的提交命令来重新提交）</li> <li>git pull (origin ***): 拉取代码到本地（git fetch + git merge）</li> <li>git push (origin ***): 推送代码到远程（git push -f -u origin dev: 强制push到对应的远程分支）</li> <li>git push origin dev:dev =&gt; 推送本地dev分支到远程dev分支，没有则创建远程dev分支</li> <li>git merge dev: 合并分支（将dev分支的修改合并到当前分支上）</li> <li>git rebase: 变基（可以合并多次commit，修改commit，没有merge记录）</li> <li>git branch: 查看本地分支（-r: 远程分支/-a: 所有分支）</li> <li>git branch ***: 新建分支</li> <li>git checkout ***: 切换分支</li> <li>git checkout -b ***: 新建分支并切换</li> <li>git branch -D ***: 删除本地分支</li> <li>git push origin :dev: 删除远程dev分支</li> <li>git branch --set-upstream-to=origin/&lt;分支&gt; &lt;本地分支&gt;: 为本地分支创建远程对应分支跟踪信息</li> <li>git status: 查看当前仓库状态</li> <li>git stash: 把工作区的修改暂时贮藏起来</li> <li>git stash list: 查看贮藏记录</li> <li>git stash pop: 把工作区贮藏的修改还原（所有分支公用一个stash栈）</li> <li>git diff: 查看当前修改尚未add的代码记录（也可查看指定文件 git diff test.txt）</li> <li>git log: 查看日志（可以加上参数  --pretty=oneline，只会显示版本号和提交时的备注信息）</li> <li>git reflog: 查看所有分支的所有操作记录（包括已经被删除的 commit 记录和 reset 的操作）</li> <li>git log -n 1: 查看最后一次提交记录</li> <li>git log -n 1 --stat: 查看最后一次提交所有更改的文件</li> <li>git log -n 1 -p: 查看最后一次提交所有更改的细节</li> <li>git reset HEAD: 回退到当前版本（也可在后面加文件名，回退某个文件）</li></ul> <blockquote><p>如我们git add 一个文件，然后发现添加了错误的内容，此时我们只是做了add 操作，就是将修改了内容添加到了暂存区，还没有执行commit，所以还没有生成版本号，当前的版本号对应的内容，还是你add之前的内容，所以我们只需要将代码回退到当前版本就行。</p></blockquote> <ul><li>git checkout -- ***.js: 还原某个文件的修改（工作区的修改也没了；如果该文件在工作区中被删除，该指令可以重新检出）</li> <li>git reset --hard HEAD^: 退回上一个版本（HEAD~1、HEAD~2: 上一个版本、上上个版本 递推）</li> <li>git reset --hard HEAD@{1}: 回退到指定版本（reset后，目标版本之后的版本不见了）（HEAD@{1} 可替换为 5位数版本号）</li></ul> <h4 id="git-reset-hard-和没有-hard的区别"><a href="#git-reset-hard-和没有-hard的区别" class="header-anchor">#</a> git reset --hard 和没有--hard的区别:</h4> <ol><li>先add,不进行commit操作，add后
a. 执行 git reset HEAD: 只对暂存区起效果，不对工作区的内容起效果(add 的内容由暂存区转为工作区)
b. 执行 git reset --hard HEAD: add 的内容和工作区的修改完全消失</li> <li>add，并commit后
a. 执行 git reset HEAD^: 和没commit一样，保留工作区修改
b. 执行 git reset --hard HEAD^: add 的内容和工作区的修改完全消失
<img src="/webnotes/assets/img/gitReset.c69036ba.png" alt="gitReset"></li></ol> <blockquote><p>版本回退的另一种方式 <code>revert</code></p></blockquote> <blockquote><p>这种方式不会把版本往前回退，而是生成一个新的版本。你之前操作的提交记录也会被保留下来</p></blockquote> <p>操作步骤如下：</p> <ol><li>找到你误提交之前的版本号</li> <li>git revert -n 版本号</li> <li>git commit -m xxxx 提交</li> <li>git push 推送到远程</li></ol> <p>OK，版本还原了，通知其他人更新一下代码吧</p> <h2 id="git-tag"><a href="#git-tag" class="header-anchor">#</a> git tag</h2> <h3 id="_1-什么是tag-什么时候应该创建一个tag"><a href="#_1-什么是tag-什么时候应该创建一个tag" class="header-anchor">#</a> 1. 什么是tag？什么时候应该创建一个tag？</h3> <ul><li>项目的版本管理中，每当一个release版本发布时，需要做一个纪录，以便以后需要的时候能查找特定的版本，这时候就用到tag这个功能。</li> <li>Git中的tag指向一次commit的id，通常用来给开发分支做一个标记，如标记一个版本号。</li></ul> <h3 id="_2-tag和branch的区别"><a href="#_2-tag和branch的区别" class="header-anchor">#</a> 2. tag和branch的区别</h3> <ul><li>branch是分支；tag是分支上的一个里程碑，一个点；</li> <li>tag就是一个只读的branch；一般为每一个可发布的里程碑版本打一个tag；</li> <li>简单说比如branch有1.0，1.1等，其中1.0分支里可以有1.0.1，1.0.2这些tag；</li> <li>tag就像是一个里程碑一个标志一个点；branch是一个新的征程一条线；</li> <li>tag是静态的，branch要向前走；</li> <li>稳定版本备份用tag，新功能多人开发用branch（开发完成后merge到master）。</li></ul> <h3 id="_3-tag常用指令"><a href="#_3-tag常用指令" class="header-anchor">#</a> 3. tag常用指令</h3> <ul><li>3.1 打tag</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> tag -a v0.1.0 -m <span class="token string">&quot;release 0.1.0 version&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><ul><li>git tag 是命令</li> <li>-a v0.1.0 是增加名为v0.1.0的标签(<code>a</code> 即annotated的缩写，指定标签类型)</li> <li>-m 后面跟着的是标签的注释(说明信息会保存在标签对象中)</li></ul></blockquote> <p><strong>打标签的操作发生在我们commit修改到本地仓库之后。</strong></p> <ul><li>3.2 提交tag
<strong>将v0.1.0标签提交到git服务器</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
$ <span class="token function">git</span> commit -m “fixed some bugs”
$ <span class="token function">git</span> tag -a v0.1.0 -m <span class="token string">&quot;release 0.1.0 version&quot;</span>
$ <span class="token function">git</span> push origin v0.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>解释：通常的git push不会将标签对象提交到git服务器，我门需要进行显示的操作。</p> <ul><li>3.3 提交标签到远程服务器上</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> push origin master
$ <span class="token function">git</span> push origin -tags
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><ul><li>普通的git push不会推送标签到服务器端，我门需要进行显示的操作 -- git push origin [tagname]。</li> <li>–tags参数表示提交所有tag至服务器端。</li></ul></blockquote> <ul><li>3.4 查看tag</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> tag
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解释：列出当前仓库的所有标签</p> <ul><li>3.5 切换tag<br> <strong>切换标签与切换分支命令相同</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> checkout <span class="token punctuation">[</span>tagname<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解释：切换标签后处于一个空的分支上，即&quot;You are in 'detached HEAD' state&quot;</p> <ul><li>3.6 列出符合模式的tag</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> tag -l <span class="token string">'v1.0.*'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3.7 查看tag版本信息</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> show v0.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3.8 补打tag<br> <strong>给指定的commit打标签</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> tag -a v0.1.0 49e0cd22f6bd9510fe65084e023d9c4316b446a6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解释：打标签不必要在HEAD之上，也可在之前的版本上打，这需要你知道某个提交对象的校验和，通过git log命令获取。</p> <ul><li>3.9 删除tag<br> <strong>误打或需要修改标签时，需要先将标签删除，再打新标签</strong></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> tag -d v0.1.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>3.10 删除远端服务器的tag</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> push origin :refs/tags/v0.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解释：参数 <code>-d</code> 即delete的缩写，意为删除其后指定的标签</p> <p>注：Git中不能真的检出一个标签，因为他们并不能像分支一样来回移动。如果想要工作目录与仓库中特定地标签版本完全一致，可以使用<font color="red">git checkout -b [分支名] [标签名]</font>在特定地标签上创建一个新分支。例如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> checkout -b version1 v1.0.0
Switched to a new branch <span class="token string">'version1'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="git-stash"><a href="#git-stash" class="header-anchor">#</a> git stash</h2> <ul><li>git stash save &quot;***&quot;: 执行存储时，添加备注，方便查找，只有git stash 也要可以的，但查找时不方便识别。</li> <li>git stash list: 查看stash了哪些存储</li> <li>git stash show: 显示做了哪些改动，默认show第一个存储，如果要显示其他存贮，后面加stash@{$num}，比如第二个 git stash show stash@{1}</li> <li>git stash show -p: 显示第一个存储的改动，如果想显示其他存存储，命令：git stash show  stash@{$num}  -p ，比如第二个：git stash show  stash@{1}  -p</li> <li>git stash apply: 应用某个存储,但不会把存储从存储列表中删除，默认使用第一个存储,即stash@{0}，如果要使用其他个，git stash apply stash@{$num} ， 比如第二个：git stash apply stash@{1}</li> <li>git stash pop: 恢复之前缓存的工作目录，将缓存堆栈中的对应stash删除，并将对应修改应用到当前的工作目录下,默认为第一个stash,即stash@{0}，如果要应用并删除其他stash，命令：git stash pop stash@{$num} ，比如应用并删除第二个：git stash pop stash@{1}</li> <li>git stash drop stash@{$num}: 丢弃stash@{$num}存储，从列表中删除这个存储</li> <li>git stash clear: 删除所有缓存的stash</li></ul> <p>说明:<font color="red">新增的文件，直接执行stash是不会被存储的</font></p> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>记住，在 Git 中任何 已提交 的东西几乎总是可以恢复的。 甚至那些被删除的分支中的提交或使用 --amend 选项覆盖的提交也可以恢复 （阅读 数据恢复 了解数据恢复）。 然而，任何你未提交的东西丢失后很可能再也找不到了。</p> <p><a href="https://blog.csdn.net/weixin_38080573/article/details/89042794" target="_blank" rel="noopener noreferrer">mac下配置多个ssh-key并添加到gitlab<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webnotes/views/tool/1.html" class="prev">
        Mac
      </a></span> <span class="next"><a href="/webnotes/views/other/1.html">
        知识点
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><BackToTop></BackToTop></div></div>
    <script src="/webnotes/assets/js/app.20f97b8a.js" defer></script><script src="/webnotes/assets/js/2.4a41272f.js" defer></script><script src="/webnotes/assets/js/13.38493cfb.js" defer></script>
  </body>
</html>
