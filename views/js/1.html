<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js基础知识 | 张佳宇的笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="WEB前端工程师">
    
    <link rel="preload" href="/webnotes/assets/css/0.styles.0982f9da.css" as="style"><link rel="preload" href="/webnotes/assets/js/app.20f97b8a.js" as="script"><link rel="preload" href="/webnotes/assets/js/2.4a41272f.js" as="script"><link rel="preload" href="/webnotes/assets/js/11.72689610.js" as="script"><link rel="prefetch" href="/webnotes/assets/js/10.dde43042.js"><link rel="prefetch" href="/webnotes/assets/js/12.449c0007.js"><link rel="prefetch" href="/webnotes/assets/js/13.38493cfb.js"><link rel="prefetch" href="/webnotes/assets/js/14.5e7b5adc.js"><link rel="prefetch" href="/webnotes/assets/js/15.1f9cbb1f.js"><link rel="prefetch" href="/webnotes/assets/js/16.ad426224.js"><link rel="prefetch" href="/webnotes/assets/js/17.10ba4518.js"><link rel="prefetch" href="/webnotes/assets/js/18.e99cc515.js"><link rel="prefetch" href="/webnotes/assets/js/19.8338c644.js"><link rel="prefetch" href="/webnotes/assets/js/20.6da5901d.js"><link rel="prefetch" href="/webnotes/assets/js/21.b98f4a2b.js"><link rel="prefetch" href="/webnotes/assets/js/22.e0395495.js"><link rel="prefetch" href="/webnotes/assets/js/23.4e2833a4.js"><link rel="prefetch" href="/webnotes/assets/js/24.cca35cca.js"><link rel="prefetch" href="/webnotes/assets/js/25.c71dcda0.js"><link rel="prefetch" href="/webnotes/assets/js/26.ecd3f0d9.js"><link rel="prefetch" href="/webnotes/assets/js/27.c14793ac.js"><link rel="prefetch" href="/webnotes/assets/js/28.0eeec312.js"><link rel="prefetch" href="/webnotes/assets/js/29.eaefc3f3.js"><link rel="prefetch" href="/webnotes/assets/js/3.ca40d839.js"><link rel="prefetch" href="/webnotes/assets/js/30.14964890.js"><link rel="prefetch" href="/webnotes/assets/js/31.0dad13c9.js"><link rel="prefetch" href="/webnotes/assets/js/32.35857f17.js"><link rel="prefetch" href="/webnotes/assets/js/33.0527b613.js"><link rel="prefetch" href="/webnotes/assets/js/34.0582020e.js"><link rel="prefetch" href="/webnotes/assets/js/35.75df06a2.js"><link rel="prefetch" href="/webnotes/assets/js/36.59f8cd94.js"><link rel="prefetch" href="/webnotes/assets/js/37.9f7e1842.js"><link rel="prefetch" href="/webnotes/assets/js/38.ac91f3cd.js"><link rel="prefetch" href="/webnotes/assets/js/39.ff460441.js"><link rel="prefetch" href="/webnotes/assets/js/4.b0af2a6e.js"><link rel="prefetch" href="/webnotes/assets/js/40.3c358678.js"><link rel="prefetch" href="/webnotes/assets/js/41.8b3470d9.js"><link rel="prefetch" href="/webnotes/assets/js/42.b01e288a.js"><link rel="prefetch" href="/webnotes/assets/js/43.220e709d.js"><link rel="prefetch" href="/webnotes/assets/js/44.9da44133.js"><link rel="prefetch" href="/webnotes/assets/js/45.fe19f32a.js"><link rel="prefetch" href="/webnotes/assets/js/46.744017ec.js"><link rel="prefetch" href="/webnotes/assets/js/47.bcf97b24.js"><link rel="prefetch" href="/webnotes/assets/js/48.6b6f9e30.js"><link rel="prefetch" href="/webnotes/assets/js/5.b62c58c1.js"><link rel="prefetch" href="/webnotes/assets/js/6.b66c6850.js"><link rel="prefetch" href="/webnotes/assets/js/7.3a5dcde7.js"><link rel="prefetch" href="/webnotes/assets/js/8.9028e652.js"><link rel="prefetch" href="/webnotes/assets/js/9.21e437ac.js">
    <link rel="stylesheet" href="/webnotes/assets/css/0.styles.0982f9da.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webnotes/" class="home-link router-link-active"><!----> <span class="site-name">张佳宇的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="tel:18813023154" class="nav-link external">
  联系我
  <!----></a></div><div class="nav-item"><a href="/webnotes/views/" class="nav-link router-link-active">
  Guide
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webnotes/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="tel:18813023154" class="nav-link external">
  联系我
  <!----></a></div><div class="nav-item"><a href="/webnotes/views/" class="nav-link router-link-active">
  Guide
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/webnotes/views/html/" class="sidebar-heading clickable"><span>Html</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/webnotes/views/js/1.html" aria-current="page" class="active sidebar-link">基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#数据类型" class="sidebar-link">数据类型</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#内置对象" class="sidebar-link">内置对象</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#错误对象" class="sidebar-link">错误对象</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#数组api" class="sidebar-link">数组api</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#string-api" class="sidebar-link">String api</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#正则表达式" class="sidebar-link">正则表达式</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#this指向" class="sidebar-link">this指向</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#oop、原型对象、构造函数" class="sidebar-link">OOP、原型对象、构造函数</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#防抖节流" class="sidebar-link">防抖节流</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#用-settimeout-模拟-setinterval" class="sidebar-link">用 setTimeout 模拟 setInterval</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#数组扁平化" class="sidebar-link">数组扁平化</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#js中数据类型的判断" class="sidebar-link">JS中数据类型的判断</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#缓存" class="sidebar-link">缓存</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#函数柯里化" class="sidebar-link">函数柯里化</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#js-计算当前时间-与某一特定时间的时间差格式成几天几时几分几秒" class="sidebar-link">js 计算当前时间 与某一特定时间的时间差格式成几天几时几分几秒</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#倒计时计算" class="sidebar-link">倒计时计算</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#获取元素的-offsettop" class="sidebar-link">获取元素的 offsetTop</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#鼠标滚动-scroll" class="sidebar-link">鼠标滚动(scroll)</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#前端实现分页检索逻辑" class="sidebar-link">前端实现分页检索逻辑</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#原生js图片上传" class="sidebar-link">原生js图片上传</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#如何无感知刷新页面" class="sidebar-link">如何无感知刷新页面</a></li><li class="sidebar-sub-header"><a href="/webnotes/views/js/1.html#复制内容到剪切板" class="sidebar-link">复制内容到剪切板</a></li></ul></li><li><a href="/webnotes/views/js/2.html" class="sidebar-link">数据结构</a></li><li><a href="/webnotes/views/js/3.html" class="sidebar-link">js中的堆和栈</a></li><li><a href="/webnotes/views/js/4.html" class="sidebar-link">Util.js</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Http</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js基础知识"><a href="#js基础知识" class="header-anchor">#</a> js基础知识</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <ul><li>什么是Javascript?
<ul><li>运行于JS解释器/引擎中的解释型脚本语言</li> <li>解释型：执行时才检查错误</li> <li>脚本语言：只有在运行的时候才会被编译或解释的语言</li></ul></li></ul> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <ul><li>基本类型：Number、Boolean、String、null、undefined、symbol(ES6)、BigInt(ES2020)</li> <li>引用类型：Object =&gt; 对象子类型(Array, Function)</li></ul> <h2 id="内置对象"><a href="#内置对象" class="header-anchor">#</a> 内置对象</h2> <ul><li>ES标准中规定的，浏览器厂商已经实现的内置类型: 11个
<ul><li>Number、String、Boolean——包装类型:专门封装基本类型的值，并提供操作基本类型的值得方法的对象</li> <li>Array、RegExp、Date、Math</li> <li>Error</li> <li>Function、Object</li> <li>Global(在浏览器中被window取代)</li></ul></li></ul> <h2 id="错误对象"><a href="#错误对象" class="header-anchor">#</a> 错误对象</h2> <p>Error: 6种</p> <ul><li>SyntaxError</li> <li>ReferenceError</li> <li>TypeError</li> <li>RangeError</li> <li>URIError</li> <li>EvalError</li></ul> <h2 id="数组api"><a href="#数组api" class="header-anchor">#</a> 数组api</h2> <ul><li>join()</li> <li>concat()</li> <li>slice(starti, endi)</li> <li>reverse()</li> <li>splice()
<ul><li>删除：arr.splice(starti, n)=&gt; n指个数</li> <li>插入：arr.splice(starti, 0, 值1, 值2, ...)</li> <li>替换: arr.splice(starti, n, 值1, 值2, ...)</li></ul></li> <li>sort()
<ul><li><p>将arr中的元素按升序排列</p></li> <li><p>默认将所有元素转换为字符串再排列：js中的数组不限制元素的类型，为了保证sort方法正常执行，默认将所有元素转为字符串，再比较unicode。所以，默认的sort方法，只能排序字符串元素。</p></li> <li><p>如果排序非字符串类型的元素: 2步:</p> <ol><li>自定义比较器函数(专门比较两个值大小的函数)</li></ol> <blockquote><p>专门比较两个数字大小的比较器：function compare(a,b){return a-b}</p></blockquote> <blockquote><p>专门比较两个字符串长度的比较器：function compare(a,b){return a.length-b.length}</p></blockquote> <ol start="2"><li>将比较器函数传入sort方法作为比较大小的依据。</li></ol> <blockquote><p>arr.sort(compare)</p></blockquote></li></ul></li> <li>push()=&gt;结尾入栈</li> <li>pop()=&gt;结尾出栈</li> <li>unshift()=&gt;开头入栈</li> <li>shift()=&gt;开头出栈</li> <li>Array.isArray(arr)</li> <li>every()</li> <li>some()</li> <li>forEach()</li> <li>map()</li> <li>filter()</li> <li>reduce()</li></ul> <h2 id="string-api"><a href="#string-api" class="header-anchor">#</a> String api</h2> <p>所有String API都无权修改原字符串，只能返回新字符串，所以都要用变量接住。</p> <ul><li>toUpperCase()</li> <li>toLowerCase()</li> <li>charAt(i) =&gt; str[i]</li> <li>charCodeAt(i)</li> <li>indexOf('关键字', fromi)</li> <li>lastIndexOf('关键字', fromi)</li> <li>search(/正则表达式/i)</li> <li>match(/正则表达式/ig)</li> <li>replace(/正则表达式/ig, '替换值')</li></ul> <details class="custom-block details"><summary>replace Demo</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//将英文句子中每个单词首字母改大写</span>
<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">&quot;you can you up&quot;</span><span class="token punctuation">;</span>
str<span class="token operator">=</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b([a-z])([a-z]*)\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">kw<span class="token punctuation">,</span>$<span class="token number">1</span><span class="token punctuation">,</span>$<span class="token number">2</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> $<span class="token number">1.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>$<span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//You Can You Up</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details> <ul><li>split(/正则表达式/)</li> <li>concat()</li> <li>slice(starti, endi)</li> <li>subString(starti, endi) 不支持负数参数</li> <li>subStr(starti, n) 从starti位置开始截取n个字符</li></ul> <h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <ul><li>字符集: 规定一位字符可用的备选字符列表=&gt;[字符列表]
<ul><li>所有字符连续排列，不需要分割</li> <li>一个字符集，只能修饰一位字符</li> <li>一个字符集中必须且只能选一个</li> <li>简写: 如果字符集太长，且连续，用-省略中间的字符:
<ul><li>1位字母：[A-Za-z]</li> <li>1位数字：[0-9]</li> <li>1位汉字：[\u4e00-\u9fa5]</li> <li>除了4和7：[^47]</li></ul></li></ul></li> <li>预定义字符集
<ul><li>1位数字：\d =&gt; [0-9]</li> <li>1位数字、字母、<em>：\w =&gt; [0-9A-Za-z</em>]</li> <li>1位空字符：\s =&gt; 空格、换行、Tab</li> <li>1位任意字符：.</li></ul></li> <li>量词：固定一个字符集出现次数的规则
<ol><li>有明确数量边界的</li></ol> <ul><li>字符集{m,n} 字符集最少m个，最多n个</li> <li>字符集{m,} m个以上</li> <li>字符集{m} 必须m个</li></ul> <ol start="2"><li>没有明确数量边界的</li></ol> <ul><li>字符集? 可有可无，最多1个</li> <li>字符集* 可有可无，个数不限</li> <li>字符集+ 至少1个，多了不限</li></ul></li> <li>选择和分组
<ul><li>选择：规则1|规则2</li> <li>分组：将一组规则，用()包裹</li></ul></li> <li>指定匹配位置
<ul><li>^ 匹配字符串开头<br>
比如: 匹配开头的空字符: ^\s+</li> <li>$ 匹配字符串结尾<br>
比如: 匹配结尾的空字符: \s+$</li> <li>\b 匹配单词边界</li></ul></li> <li>api
<ul><li>var arr = reg.exec(str) 即找每个关键词的内容，又获得每个关键词的位置。如果找所有，要用循环推动</li></ul> <details class="custom-block details"><summary>reg.exec() Demo</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;明明&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;静静&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>names<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;|&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">&quot;明明喜欢我，却不告诉我&quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;别理我，我想静静&quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;静静是谁?&quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;你先告诉我明明是谁&quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;窗前明月光&quot;</span><span class="token operator">+</span>
        <span class="token string">&quot;一行白鹭上青天&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token comment">//只要arr不是null</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>arr<span class="token operator">=</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;在位置 &quot;</span><span class="token operator">+</span>arr<span class="token punctuation">.</span>index<span class="token operator">+</span>
    <span class="token string">&quot; 发现敏感词: &quot;</span><span class="token operator">+</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>
    <span class="token string">&quot; 下次从&quot;</span><span class="token operator">+</span>reg<span class="token punctuation">.</span>lastIndex<span class="token operator">+</span><span class="token string">&quot;开始&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在位置 0 发现敏感词: 明明 下次从2开始</span>
<span class="token comment">// 在位置 17 发现敏感词: 静静 下次从19开始</span>
<span class="token comment">// 在位置 19 发现敏感词: 静静 下次从21开始</span>
<span class="token comment">// 在位置 29 发现敏感词: 明明 下次从31开始</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></details> <ul><li>var bool = reg.test(str)</li></ul></li></ul> <h2 id="this指向"><a href="#this指向" class="header-anchor">#</a> this指向</h2> <h4 id="this-指代正在调用方法的对象-前的对象"><a href="#this-指代正在调用方法的对象-前的对象" class="header-anchor">#</a> this: 指代正在调用方法的对象(.前的对象)</h4> <ul><li>obj.method() //method中的this-&gt;obj</li> <li>如果一个函数，没有用任何对象调用，其中this默认指window<br>
method(); //method中的this-&gt;window</li> <li>匿名函数自调: 匿名函数内的this-&gt;window</li> <li>回调函数:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>window
<span class="token punctuation">}</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>window
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>window
<span class="token punctuation">}</span><span class="token punctuation">,</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>特例：jquery中</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token operator">-</span><span class="token operator">&gt;</span>当前<span class="token constant">DOM</span>元素
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>事件处理函数: <strong>this-&gt;绑定事件的元素对象</strong></li> <li>如果this不是想要的:
<ul><li>需要立刻执行的函数: call/apply临时替换this</li> <li>替换回调函数中的this: bind 永久替换</li></ul></li></ul> <h2 id="oop、原型对象、构造函数"><a href="#oop、原型对象、构造函数" class="header-anchor">#</a> OOP、原型对象、构造函数</h2> <ul><li>原型对象(prototype)：集中保存所有子对象共有成员的父级对象
<ul><li>如何获得：
<ul><li>构造函数.prototype</li> <li>子对象.<strong>proto</strong>(内部属性)</li> <li>Object.getPrototypeOf(obj) -&gt; 获得obj对象的父级原型对象</li></ul></li></ul></li> <li>原型链
<ul><li>由各级对象的__proto__属性，逐级继承，形成的链式结构</li></ul></li> <li>对象的calss属性
<ul><li>对象的内部属性，记录创建对象时使用的类型名</li> <li>只有一个办法获得对象的class：Object.prototype.toString() -&gt; [object Object](对象 class)
<ul><li>问题: 数组类型等内置类型，纷纷重写了toString方法，直接调用数组对象的方法，不再返回class属性值。</li> <li>call强行借用一个函数，并临时替换函数中的this为指定对象 -&gt; Object.prototype.toString.call(obj)</li></ul></li></ul></li> <li>判断继承关系
<ol><li>根据原型对象判断
<ul><li>father.isPrototypeOf(child) -&gt; 判断father是否是child的父级对象;判断child是否继承自father；不仅检查直接父对象，而且检查整个原型链。</li></ul></li> <li>根据构造函数判断
<ul><li>child instanceof 构造函数 -&gt; 判断child是否是构造函数创建出的实例；不仅检查直接父对象，而且检查整个原型链。</li></ul></li></ol></li> <li>修改继承
<ol><li>每次只能修改一个对象的父对象
<ul><li>child.<strong>proto</strong> = father -&gt; 等同于：Object.setPrototypeOf(child, father)</li></ul></li> <li>批量修改所有子对象的父对象
<ul><li>构造函数.prototype = father -&gt; 强调: 必须在开始创建对象之前就修改。</li></ul></li> <li>两种类型间的继承
<ul><li>定义公共父类型，集中定义子类型有用的属性和方法</li> <li>让子类型的原型对象继承父类型的原型对象——子对象可使用公共父类型中的共有方法。——inherits<br>
Object.setPrototypeOf(<br>
子类型构造函数.prototype,<br>
父类型构造函数.prototype<br>
)
<blockquote><p>inherits继承: 直接使用父对象中的成员</p></blockquote></li> <li>在子类型构造函数中借用父类型构造函数——extends<br>
父类型构造函数.call(this,属性参数)<br>
父类型构造函数.apply(this,arguments)
<blockquote><p>extends扩展: 为子对象扩展父类型没有的属性</p></blockquote></li></ul></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//定义父类型构造:</span>
<span class="token keyword">function</span> <span class="token function">Flyer</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>speed</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token operator">=</span>speed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Flyer</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token function-variable function">fly</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">&quot;以时速&quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>speed<span class="token operator">+</span><span class="token string">&quot;飞行&quot;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//定义Plane类型描述敌机</span>
  <span class="token comment">//包括3个属性: name,speed,score</span>
<span class="token keyword">function</span> <span class="token function">Plane</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>speed<span class="token punctuation">,</span>score</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//先借用父类型构造函数</span>
  <span class="token function">Flyer</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//=&gt;Flyer(name,speed)//this-&gt;f16</span>
  <span class="token comment">//this-&gt;如果一个方法没有用new或任何对象调用,则其中的this，默认为window</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token operator">=</span>score<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//在Plane的原型对象中添加fly方法</span>
  <span class="token comment">//输出: &quot;name以时速speed飞行&quot;</span>
<span class="token comment">//在Plane的原型对象中添加getScore方法</span>
  <span class="token comment">//输出: &quot;击落敌机，得score分&quot;</span>
<span class="token class-name">Plane</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getScore</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token string">&quot;击落敌机，得&quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>score<span class="token operator">+</span><span class="token string">&quot;分&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//让Plane的原型对象继承Flyer的原型对象</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>
  <span class="token class-name">Plane</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">Flyer</span><span class="token punctuation">.</span>prototype
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义Bee类型描述蜜蜂</span>
  <span class="token comment">//包括3个属性: name,speed,award</span>
<span class="token keyword">function</span> <span class="token function">Bee</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>speed<span class="token punctuation">,</span>award</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">Flyer</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>award<span class="token operator">=</span>award<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//在Plane的原型对象中添加fly方法</span>
  <span class="token comment">//输出: &quot;name以时速speed飞行&quot;</span>
<span class="token comment">//在Plane的原型对象中添加getAward方法</span>
  <span class="token comment">//输出: &quot;击落蜜蜂，获得award奖励&quot;</span>
<span class="token class-name">Bee</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token function-variable function">getAward</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token string">&quot;击落蜜蜂，获得&quot;</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>award<span class="token operator">+</span><span class="token string">&quot;奖励&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//让Plane的原型对象继承Flyer的原型对象</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>
  <span class="token class-name">Bee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">Flyer</span><span class="token punctuation">.</span>prototype
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> f16<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Plane</span><span class="token punctuation">(</span><span class="token string">&quot;F16&quot;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bee<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Bee</span><span class="token punctuation">(</span><span class="token string">&quot;小蜜蜂&quot;</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token string">&quot;1 life&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f16<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  f16<span class="token punctuation">.</span><span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bee<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  bee<span class="token punctuation">.</span><span class="token function">getAward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></li> <li>对象的属性
<ul><li>命名属性：自定义的属性</li> <li>数据属性：实际存储属性值的属性</li> <li>四大特性：
<ol><li>value: 实际存储属性值</li> <li>writable：控制是否可写</li> <li>enumerable：控制能否被遍历（for in）到 -&gt; 但是用.依然可以访问到</li> <li>configurable：控制以上特性是否可修改，以及是否可以删除属性</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如何查看四大特性</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>
    obj<span class="token punctuation">,</span><span class="token string">&quot;属性名&quot;</span>
<span class="token punctuation">)</span>
<span class="token comment">// 如何修改一个属性的四大特性:</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>
    obj<span class="token punctuation">,</span> <span class="token string">&quot;属性名&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      特性<span class="token operator">:</span> 值<span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token operator">:</span><span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">/* 第三个参数中，只写需要修改的特性即可
如果defineProperty修改的属性不存在，会自动创建。
但是，defineProperty自动创建的属性，四大特性，默认都为false！
而普通方式添加的属性,四大特性都为true。 */</span>

<span class="token comment">// defineProperty问题：一次只能修改一个属性。</span>
<span class="token comment">// 解决:</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>
    obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
          属性名<span class="token operator">:</span> <span class="token punctuation">{</span>
          特性名<span class="token operator">:</span> 值<span class="token punctuation">,</span>
          <span class="token operator">...</span><span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 问题: 数据属性对属性的保护比较简单</span>
<span class="token comment">// 解决: 用访问器属性自定义保护逻辑</span>
<span class="token comment">// 访问器属性: 不直接保存属性值，而是为其它数据属性提供保护的特殊属性</span>
<span class="token comment">// 四大特性: </span>
<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> 受保护的属性的值
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//验证通过</span>
  受保护的属性<span class="token operator">=</span>val
<span class="token punctuation">}</span>
enumerable<span class="token operator">:</span> <span class="token operator">...</span>
configurable<span class="token operator">:</span> <span class="token operator">...</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div></li></ul></li> <li>防篡改<br>
防止对已经创建好的对象的属性进行增减
<ul><li>防扩展: 禁止向对象中添加新属性
<ul><li>每个对象都有一个内部属性extensible,默认为true，控制能否向对象中添加新属性</li> <li>设置对象防扩展: Object.preventExtensions(obj)</li> <li>问题: 不防删除</li></ul></li> <li>密封：即防扩展，又设置所有属性的configurable为false！所有属性禁止删除
<ul><li>Object.seal(obj)</li> <li>密封后，属性值，可改</li></ul></li> <li>冻结: 所有属性禁止增减，属性值禁止修改
<ul><li>何时使用: 专门定义一个对象，集中保存程序中使用的所有常量属性。</li> <li>Object.freeze(obj)</li></ul></li></ul></li> <li>Object api
<ul><li>Object.getPrototypeOf(obj)</li> <li>Object.setPrototypeOf(child, father)</li> <li>Object.getOwnPropertyDescriptor()</li> <li>Object.defineProperty()</li> <li>Object.defineProperties()</li> <li>Object.preventExtensions(obj)</li> <li>Object.seal(obj)</li> <li>Object.freeze(obj)</li> <li>Object.create()
<ol><li>基于一个现有父对象，创建一个新子对象</li> <li>继承父对象</li> <li>同时扩展子对象的自有新属性</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 何时使用: 只要基于一个现有父对象，创建子对象时</span>
<span class="token comment">// 如何使用: </span>
<span class="token keyword">var</span> child <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>father<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  同defineProperties中第<span class="token number">2</span>个参数
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 如果不扩展新属性，可省略第二个参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li>obj.hasOwnProperty('属性名')</li> <li>father.isPrototypeOf(child)</li></ul></li></ul> <h2 id="防抖节流"><a href="#防抖节流" class="header-anchor">#</a> 防抖节流</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments
    timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      timer <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 防抖2.0</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span> immediate <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timeout<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">executedFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

    <span class="token keyword">var</span> <span class="token function-variable function">later</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>immediate<span class="token punctuation">)</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> callNow <span class="token operator">=</span> immediate <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>timeout<span class="token punctuation">;</span>

    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>

    timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>later<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// eg</span>
dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// todo someting</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">// 节流</span>
<span class="token keyword">function</span> <span class="token function">throttle</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> interval <span class="token operator">=</span> <span class="token number">200</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> last<span class="token punctuation">,</span> timer
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments
    <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>last <span class="token operator">&amp;&amp;</span> now <span class="token operator">-</span> last <span class="token operator">&lt;</span> interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        last <span class="token operator">=</span> now
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      last <span class="token operator">=</span> now
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="用-settimeout-模拟-setinterval"><a href="#用-settimeout-模拟-setinterval" class="header-anchor">#</a> 用 setTimeout 模拟 setInterval</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.写一个 interval 方法</span>
<span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token function">interval</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token function-variable function">interv</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer<span class="token operator">=</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>interv<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  timer<span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>interv<span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.和 setInterval() 一样使用它</span>
<span class="token function">interval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3.终止定时器</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="数组扁平化"><a href="#数组扁平化" class="header-anchor">#</a> 数组扁平化</h2> <h3 id="概念-数组扁平化就是将一个嵌套多层的数组转换为只有一层的数组"><a href="#概念-数组扁平化就是将一个嵌套多层的数组转换为只有一层的数组" class="header-anchor">#</a> 概念：数组扁平化就是将一个嵌套多层的数组转换为只有一层的数组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 现有如下数组</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li>ES6方法array.prototype.flat</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Infinity 代表层级无限大</span>
arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>toString()方法</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>JSON.stringify方法</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>arr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[|\]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>while循环</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">while</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="5"><li>递归实现</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">~</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">myFlat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> newArr
    <span class="token punctuation">}</span>
    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>myFlat <span class="token operator">=</span> myFlat
  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">myFlat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="js中数据类型的判断"><a href="#js中数据类型的判断" class="header-anchor">#</a> JS中数据类型的判断</h2> <h3 id="typeof-instanceof-constructor-object-prototype-tostring-call"><a href="#typeof-instanceof-constructor-object-prototype-tostring-call" class="header-anchor">#</a> typeof，instanceof，constructor，Object.prototype.toString.call()</h3> <h4 id="_1-typeof-关键字"><a href="#_1-typeof-关键字" class="header-anchor">#</a> 1. typeof 关键字</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object     []数组的数据类型在 typeof 中被解释为 object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// object     null 的数据类型被 typeof 解释为</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>空数组 和 null被 typeof 解释为 object 类型，有的人可能会认为 typeof 关键字对数组 和 null 的类型判断是错误的，其实typeof对于数组 和 null 的类型判断是正确的，只不过不够精准而已。<br>
其他（数字Number，布尔值Boolean，字符串String，函数Function，对象Object，Undefined）这一些数据类型在typeof 下都被精准的解释，只有数组和null的数据类型不够精准。那么如何才能获取到 数组 和 null 的精准数据类型。这就用到下面这种方法。</p> <h4 id="_2-instanceof关键字"><a href="#_2-instanceof关键字" class="header-anchor">#</a> 2. instanceof关键字</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// undefined 和 null 在这里的表现有点异于寻常数据，我们先注释掉</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str'</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// true    </span>
<span class="token comment">// console.log(undefined instanceof Undefined);</span>
<span class="token comment">// console.log(null instanceof Null);</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>以上结果显示，直接的字面量值判断数据类型，只有引用数据类型（Array，Function，Object）被精准判断，其他（数值Number，布尔值Boolean，字符串String）字面值不能被instanceof精准判断。我们来看一下 instanceof 在MDN中的解释：instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的 prototype 属性。其意思就是判断对象是否是某一数据类型（如Array）的实例，请重点关注一下是判断一个对象是否是数据类型的实例。在这里字面量值，2， true ，'str'不是实例，所以判断值为false。眼见为实，看下面的例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>字面值被实例化了，他们的判断值变为了 true。<br>
接着，我们看一下 undefined 和 null   ,说说为什么这两货比较特殊，实际上按理来说，null的所属类就是Null，undefined就是Undefined，但事实并非如此：控制台输出如下结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">undefined</span> <span class="token keyword">instanceof</span> <span class="token class-name">Undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Uncaught TypeError: undefined is not a constructor</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">null</span> <span class="token keyword">instanceof</span> <span class="token class-name">Null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Uncaught TypeError: null is not a constructor</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>浏览器认为null，undefined不是构造器。但是在 typeof 中你可能已经发现了，typeof null的结果是object，typeof undefined的结果是undefined ，这是怎么回事呢?<br>
尤其是null，其实这是js发展过程中设计者的重大失误，早期准备更改null的类型为null，由于当时已经有大量网站使用了null，如果更改，将导致很多网站的逻辑出现漏洞问题，就没有更改过来，于是一直遗留到现在。作为学习者，我们只需要记住就好。</p> <h4 id="_3-constructor"><a href="#_3-constructor" class="header-anchor">#</a> 3.  constructor</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>用costructor来判断类型看起来是完美的，然而，如果我创建一个对象，更改它的原型，这种方式也变得不可靠了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> f<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Fn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如此轻易的更改了contructor，到这里，你可能会想有没有一种最精准的方式去判断数据类型呢？接下来是终极大绝招，奥特曼也是总是到最紧急的时候才出现，这样才能体现价值所在。</p> <h4 id="_4-object-prototype-tostring-call"><a href="#_4-object-prototype-tostring-call" class="header-anchor">#</a> 4. Object.prototype.toString.call()</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用 Object 对象的原型方法 toString ，使用 call 进行狸猫换太子，借用Object的 toString  方法</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// [object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// [object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// [object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// [object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// [object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// [object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// [object Null]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>结果精准的显示我们需要的数据类型。就算我们改变对象的原型，他依然会显示正确的数据类型。</p> <h2 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h2> <ul><li>强缓存
<ul><li>浏览器先根据这个资源的http头信息来判断是否命中强缓存，如果命中则直接加在缓存中的资源，并不会将请求发送给服务器</li> <li>通过expires(new Date()返回值格式，绝对服务器时间,已弃用)和cache-control(max-age=200秒;no-cache;no-store)控制</li></ul></li> <li>协商缓存
<ul><li>如果未命中强缓存（cache-control：no-cache或max-age=0），浏览器会将资源加载请求发送到服务器。服务器来判断浏览器本地缓存是否失效。如果可以使用，服务器并不会返回资源信息，浏览器继续从缓存中加载资源</li> <li>通过last-modify(new Date()返回值格式)和E-tag(类型文件md5的一个字符串)控制</li></ul></li></ul> <blockquote><ol><li>为什么有expires又需要cache-control?</li></ol> <ul><li>因为expires有和服务器和浏览器时间不同的问题，expires是绝对时间，cache-control是相对时间</li></ul> <ol start="2"><li>last-modify和E-tag</li></ol> <ul><li>last-modify它有个精度问题，到秒。e-tag没有精度问题，只要文件改变，值就改变</li></ul></blockquote> <h2 id="函数柯里化"><a href="#函数柯里化" class="header-anchor">#</a> 函数柯里化</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// const curry = fn =&gt;</span>
<span class="token comment">//   (judge = (...args) =&gt;</span>
<span class="token comment">//     args.length &gt;= fn.length</span>
<span class="token comment">//       ? fn(...args)</span>
<span class="token comment">//       : (...arg) =&gt; judge(...args, ...arg));</span>

<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function-variable function">judge</span> <span class="token operator">=</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> args<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> fn<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token keyword">const</span> currySum <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">currySum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token function">currySum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token function">currySum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="js-计算当前时间-与某一特定时间的时间差格式成几天几时几分几秒"><a href="#js-计算当前时间-与某一特定时间的时间差格式成几天几时几分几秒" class="header-anchor">#</a> js 计算当前时间 与某一特定时间的时间差格式成几天几时几分几秒</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">dateCalc</span> <span class="token punctuation">(</span>date <span class="token operator">=</span> <span class="token string">'2015/05/01 00:00:00'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//结束时间</span>
  <span class="token keyword">var</span> date3 <span class="token operator">=</span> date2<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//时间差的毫秒数      </span>
  <span class="token comment">//------------------------------</span>
  <span class="token comment">//计算出相差天数</span>
  <span class="token keyword">var</span> days<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>date3<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">//计算出小时数</span>
  <span class="token keyword">var</span> leave1<span class="token operator">=</span>date3<span class="token operator">%</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>    <span class="token comment">//计算天数后剩余的毫秒数</span>
  <span class="token keyword">var</span> hours<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>leave1<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">//计算相差分钟数</span>
  <span class="token keyword">var</span> leave2<span class="token operator">=</span>leave1<span class="token operator">%</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>        <span class="token comment">//计算小时数后剩余的毫秒数</span>
  <span class="token keyword">var</span> minutes<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>leave2<span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">//计算相差秒数</span>
  <span class="token keyword">var</span> leave3<span class="token operator">=</span>leave2<span class="token operator">%</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span>      <span class="token comment">//计算分钟数后剩余的毫秒数</span>
  <span class="token keyword">var</span> seconds<span class="token operator">=</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>leave3<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">相差</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>days<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">天</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">小时</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分钟</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">分钟</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="倒计时计算"><a href="#倒计时计算" class="header-anchor">#</a> 倒计时计算</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 倒计时文案计算
 * @param {*} remaintime(ms)
 * @returns 
 */</span>
<span class="token keyword">function</span> <span class="token function">countDown</span> <span class="token punctuation">(</span><span class="token parameter">remaintime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> day <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>remaintime <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">365</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> hour <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>remaintime <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">24</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> minute <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>remaintime <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> second <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>remaintime <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token comment">// time&lt;10补0</span>
  hour <span class="token operator">=</span> hour <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> hour <span class="token operator">:</span> hour
  minute <span class="token operator">=</span> minute <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> minute <span class="token operator">:</span> minute
  second <span class="token operator">=</span> second <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> second <span class="token operator">:</span> second
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hour<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minute<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="获取元素的-offsettop"><a href="#获取元素的-offsettop" class="header-anchor">#</a> 获取元素的 offsetTop</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getOffsetTop</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> el<span class="token punctuation">.</span>offsetParent <span class="token operator">?</span> el<span class="token punctuation">.</span>offsetTop <span class="token operator">+</span> <span class="token function">getOffsetTop</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>offsetParent<span class="token punctuation">)</span> <span class="token operator">:</span> el<span class="token punctuation">.</span>offsetTop
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="鼠标滚动-scroll"><a href="#鼠标滚动-scroll" class="header-anchor">#</a> 鼠标滚动(scroll)</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">scrollFunc</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
  ev<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ev<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> max <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.warning_content_wrap'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.warning_content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>max<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>wheelDelta<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">||</span> ev<span class="token punctuation">.</span>detail<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 向上滚</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> transFT <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>top<span class="token operator">&gt;</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      top <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token punctuation">}</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.warning_content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span>top<span class="token operator">+</span><span class="token string">'px'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> transFT <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>top<span class="token operator">&lt;</span>max<span class="token punctuation">)</span><span class="token punctuation">{</span>
      top <span class="token operator">=</span> max
    <span class="token punctuation">}</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.warning_content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'top'</span><span class="token punctuation">,</span>top<span class="token operator">+</span><span class="token string">'px'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  transFT <span class="token operator">=</span> top<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="前端实现分页检索逻辑"><a href="#前端实现分页检索逻辑" class="header-anchor">#</a> 前端实现分页检索逻辑</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">dataFilter</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> key <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> page <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token string">'10'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sourceData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token function">String</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>tableAllData <span class="token operator">=</span> res
  <span class="token keyword">const</span> totalCount <span class="token operator">=</span> res<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> totalPage <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>res <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> limit<span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    currPage<span class="token operator">:</span> page<span class="token punctuation">,</span>
    pageSize<span class="token operator">:</span> limit<span class="token punctuation">,</span>
    totalCount<span class="token punctuation">,</span>
    totalPage<span class="token punctuation">,</span>
    list
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="原生js图片上传"><a href="#原生js图片上传" class="header-anchor">#</a> 原生js图片上传</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> file <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;upload-avatar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> preview <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;avatar-preview&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preview<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;img src=&quot;'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">+</span><span class="token string">'&quot; alt=&quot;avatar&quot; class=&quot;img-responsive&quot; width=&quot;200px&quot; height=&quot;200px&quot;&gt;'</span><span class="token punctuation">;</span>
    img_src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="如何无感知刷新页面"><a href="#如何无感知刷新页面" class="header-anchor">#</a> 如何无感知刷新页面</h2> <ul><li>需求
<ul><li>开发项目的时候，需要点击tab需要根据点击的信息重新获取接口渲染页面</li></ul></li> <li>解决
<ul><li>方法一: <font color="red">不建议因为会重新刷新页面</font> <ul><li>更换url地址: <code>window.location.href = '/index?name=zjy&amp;age=28'</code></li> <li>每次都会重新进入componentDidmount</li> <li>每次都会重新刷新页面，使用感受不好</li></ul></li> <li>方法二: 通过<code>pushState(state, title, url?)</code> <ul><li>pushState触发之后会在栈里面添加一条信息</li> <li>如何监听它的变化呢？
<ol><li>默认方法是 popState
<ul><li>但是这个方法只能在前进后退的时候出发，然后获取信息</li> <li>然而需求是点击之后就需要监听到然后调用接口，所以popState不满足要求</li></ul></li> <li>改进
<ul><li>通过添加自定义监听方法</li></ul></li></ol></li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 为window绑定pushState监听的方法，只要触发了pushState就收到通知
 * 
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">wrapState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">// 获取原始定义</span>
  <span class="token keyword">let</span> raw <span class="token operator">=</span> window<span class="token punctuation">.</span>history<span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 经过包装的pushState或replaceState</span>
      <span class="token keyword">let</span> wrapper <span class="token operator">=</span> <span class="token function">raw</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 定义名为action的事件</span>
      <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 将调用pushState或replaceState时的参数作为stateInfo属性放到事件参数event上</span>
      e<span class="token punctuation">.</span>stateInfo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>arguments<span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 调用pushState或replaceState时触发该事件</span>
      window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> wrapper<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">typeof</span> window <span class="token operator">!=</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>history<span class="token punctuation">.</span>pushState <span class="token operator">=</span> <span class="token function">wrapState</span><span class="token punctuation">(</span><span class="token string">'pushState'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 无状态跳转</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> pushState <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> title <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> title<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">replateState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> title<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 监听</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">listenPushState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pushState'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
    <span class="token function">callback</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>stateInfo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">listenReplaceState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'replaceState'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
    <span class="token function">callback</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>stateInfo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p><img src="/webnotes/assets/img/rmvb.41c4f259.gif" alt="refreshTabPage"></p> <h2 id="复制内容到剪切板"><a href="#复制内容到剪切板" class="header-anchor">#</a> 复制内容到剪切板</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 复制链接</span>
<span class="token function">clipboard</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
  input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'readonly'</span><span class="token punctuation">,</span> <span class="token string">'readonly'</span><span class="token punctuation">)</span>
  input<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
  input<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// input.setSelectionRange(0, 9999) // 替换input.select(),可解决ios兼容问题</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">)</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'复制成功'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'复制失败'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/webnotes/views/css/3.html" class="prev">
        Sass用法指南
      </a></span> <span class="next"><a href="/webnotes/views/js/2.html">
        数据结构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><BackToTop></BackToTop></div></div>
    <script src="/webnotes/assets/js/app.20f97b8a.js" defer></script><script src="/webnotes/assets/js/2.4a41272f.js" defer></script><script src="/webnotes/assets/js/11.72689610.js" defer></script>
  </body>
</html>
