<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  姓名：<span id="spanName"></span>
  <br>
  <input type="text" id="inputName">
  <!-- vue2.0 -->
  <script>
    // 1.对原始数据克隆
    // 2.需要分别给对象中的每一个属性设置监听

    // let obj = {
    //   name: ''
    // }
    // let newObj = JSON.parse(JSON.stringify(obj))
    // Object.defineProperty(obj, 'name', {
    //   get() {
    //     return newObj.name
    //   },
    //   set(val) {
    //     if (val === newObj.name) return
    //     newObj.name = val
    //     observer()
    //   }
    // })

    // function observer() {
    //   spanName.innerHTML = obj.name
    //   inputName.value = obj.name
    // }

    // setTimeout(() => {
    //   obj.name = '珠峰培训'
    // }, 1000)

    // inputName.oninput = function() {
    //   obj.name = this.value
    // }
  </script>

  <!-- vue3.0 -->
  <script>
    let obj = {}
    obj = new Proxy(obj, {
      get(target, prop) {
        return target[prop]
      },
      set(target, prop, value) {
        target[prop] = value
        observer()
      }
    })

    function observer() {
      spanName.innerHTML = obj.name
      inputName.value = obj.name
    }

    setTimeout(() => {
      obj.name = '珠峰培训'
    }, 1000)

    inputName.oninput = function() {
      obj.name = this.value
    }
  </script>
</body>
</html>